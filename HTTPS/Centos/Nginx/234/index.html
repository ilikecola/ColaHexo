<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      基于Centos7和Nginx下Let&#39;s Encrypt的HTTPS证书申请 | Cola&#39;s Memory 
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="ilikecola">
    
    

    <meta name="description" content="Let’s Encrypt由 ISRG（Internet Security Research Group，互联网安全研究小组）提供服务，而 ISRG 是来自于美国加利福尼亚州的一个公益组织。Let’s Encrypt 得到了 Mozilla、Cisco、Akamai、Electronic Frontier Foundation 和 Chrome 等众多公司和机构的支持，发展十分迅猛。申请 Let’">
<meta property="og:type" content="article">
<meta property="og:title" content="基于Centos7和Nginx下Let's Encrypt的HTTPS证书申请 | Cola's Memory">
<meta property="og:url" content="http://colascarlet.moe/HTTPS/Centos/Nginx/234/index.html">
<meta property="og:site_name" content="Cola's Memory">
<meta property="og:description" content="Let’s Encrypt由 ISRG（Internet Security Research Group，互联网安全研究小组）提供服务，而 ISRG 是来自于美国加利福尼亚州的一个公益组织。Let’s Encrypt 得到了 Mozilla、Cisco、Akamai、Electronic Frontier Foundation 和 Chrome 等众多公司和机构的支持，发展十分迅猛。申请 Let’">
<meta property="og:updated_time" content="2017-02-10T18:23:42.038Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="基于Centos7和Nginx下Let's Encrypt的HTTPS证书申请 | Cola's Memory">
<meta name="twitter:description" content="Let’s Encrypt由 ISRG（Internet Security Research Group，互联网安全研究小组）提供服务，而 ISRG 是来自于美国加利福尼亚州的一个公益组织。Let’s Encrypt 得到了 Mozilla、Cisco、Akamai、Electronic Frontier Foundation 和 Chrome 等众多公司和机构的支持，发展十分迅猛。申请 Let’">
    
    
    
      <link rel="icon" type="image/x-icon" href="/favicon.png">
    
    <link rel="stylesheet" href="/css/animsition.min.css">
    <link rel="stylesheet" href="/css/uno.css">
<!---    <link rel="stylesheet" href="/css/highlight.css"> --->
    <link rel="stylesheet" href="/css/archive.css">
    <link rel="stylesheet" href="/css/china-social-icon.css">
    <link rel="stylesheet" href="/css/sons-of-obsidian.css">

</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed animsition">


  <div class="panel-main">

  
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        
        <a href="/" title="link to homepage for Cola&#39;s Memory"><img src="/avatar.png" width="80" alt="Cola&#39;s Memory logo" class="panel-cover__logo logo" /></a>
        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">Cola&#39;s Memory</a></h1>
        <hr class="panel-cover__divider" />

        
        <p class="panel-cover__description">
          Just A Memorization
        </p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                  
                    <li id="page-button-home" class="home_navigation__item navigation__item"><a style="cursor:pointer" title="" class="home-button">Home</a></li>
                                 
              
                  
                    <li id="page-button-blog" class="blog_navigation__item navigation__item"><a href="/#blog" title="" class="blog-button">Blog</a></li>
                                 
              
                  
                  	<li id="page-button-about" class="other_navigation__item navigation__item"><a href="/about" title="" class="other-button">About</a></li>
                                 
              
                  
                  	<li id="page-button-records" class="other_navigation__item navigation__item"><a href="/records" title="" class="other-button">Records</a></li>
                                 
              
                  
                  	<li id="page-button-ss" class="other_navigation__item navigation__item"><a href="https://ss.remiliascarlet.tk/auth/login" title="" class="other-button">Shadowsocks</a></li>
                                 
              

            </ul>
          </nav>

          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

-------------------------------->

<!-- add social info here -->



<nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
      <!-- Github -->
      <li id="social-button-github" class="navigation__item" style="display:inline-block" >
        <a href="https://github.com/ilikecola" target="_blank" title="ilikecola on GitHub">
          <i class='icon icon-social-github'></i>
          <span class="label">GitHub</span>
        </a>
      </li>
    
    
    <li id="social-button-twitter" class="navigation__item" style="display:inline-block" >
        <a href="https://twitter.com/tkscarlet"  target="_blank" title="ilikecola on Twitter">
          <i class='icon icon-social-twitter'></i>
          <span class="label">Twitter</span>
        </a>
      </li>

    <!-- China social icon -->
    <!--
    
      <li class="navigation__item">
        <a href="" title="">
          <i class='icon cs-icon-douban'></i>
          <span class="label">Douban</span>
        </a>
      </li>
    -->
    
      <li id="social_button-weibo" class="navigation__item" style="display:inline-block" >
        <a href="http://weibo.com/2057404752"  target="_blank" title="ilikecola on Weibo">
          <i class='icon cs-icon-weibo'></i>
          <span class="label">Weibo</span>
        </a>
      </li>





  </ul>
</nav>



        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>
		
    <div class="animsition content-wrapper-post">
    
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h0 class="post-title">基于Centos7和Nginx下Let&#39;s Encrypt的HTTPS证书申请</h0>

    

    <div class="post-meta">
      <time datetime="2017-02-11" class="post-meta__date date">2017-02-11</time> 

      <span class="post-meta__tags tags">

          
            <font class="categories">
            &#8226; 分类:
            <a class="categories-link" href="/categories/HTTPS/">HTTPS</a>, <a class="categories-link" href="/categories/HTTPS/Centos/">Centos</a>, <a class="categories-link" href="/categories/HTTPS/Centos/Nginx/">Nginx</a>
            </font>
          

          

      </span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <p>Let’s Encrypt由 ISRG（Internet Security Research Group，互联网安全研究小组）提供服务，而 ISRG 是来自于美国加利福尼亚州的一个公益组织。Let’s Encrypt 得到了 Mozilla、Cisco、Akamai、Electronic Frontier Foundation 和 Chrome 等众多公司和机构的支持，发展十分迅猛。申请 Let’s Encrypt 证书不但免费，还非常简单，虽然每次只有 90 天的有效期，但可以通过脚本定期更新，配好之后一劳永逸。<br><a id="more"></a></p>
<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><ul>
<li>申请证书<ul>
<li>安装Cerbot ACME客户端</li>
<li>申请HTTPS证书</li>
<li>自动续期</li>
</ul>
</li>
<li>配置Nginx</li>
</ul>
<h1 id="申请证书"><a href="#申请证书" class="headerlink" title="申请证书"></a>申请证书</h1><h2 id="安装Cerbot-ACME客户端"><a href="#安装Cerbot-ACME客户端" class="headerlink" title="安装Cerbot ACME客户端"></a>安装Cerbot ACME客户端</h2><p>Certbot包部署在EPEL（企业Linux的额外包）。 要使用Certbot，必须首先启用EPEL库。<br>执行此操作后，您可以通过运行以下命令来安装Certbot：</p>
<pre><code>$ sudo yum install certbot
</code></pre><p>Certbot支持多种不同的“插件”，可用于获取和/或安装证书。</p>
<h2 id="申请HTTPS证书"><a href="#申请HTTPS证书" class="headerlink" title="申请HTTPS证书"></a>申请HTTPS证书</h2><p>由于Centos7尚不支持自动安装，因此可以使用certonly命令获取相应证书。</p>
<pre><code>certbot certonly
</code></pre><p>这个命令将允许使用交互式选择用于获取证书的插件和选项。<br>如果是已经有一个网络服务器正在运行，建议选择“webroot”插件。<br>或者，可以在命令行中指定更多信息。<br>要使用“webroot”插件获取证书，可以使用任何webserver软件的webroot目录：</p>
<pre><code>$ certbot certonly --webroot -w /var/www/example -d example.com -d www.example.com -w /var/www/thing -d thing.is -d m.thing.is
</code></pre><p>此命令将获取<code>example.com</code>，<code>www.example.com</code>，<code>thing.is</code>和<code>m.thing.is</code>的各自的单个证书,并会将文件放在<code>/var/www/example</code>下面，以证明前两个域的控制，以及/var/www/thing下，以证明第二对域名。</p>
<blockquote>
<p>注意：<br>要使用webroot插件，服务器必须配置为可以从隐藏目录读取文件。 如果/.well-known由Web服务器配置进行过特别处理，可能需要修改配置以确保/.well-known/acme-challenge中的文件由Web服务器提供。</p>
</blockquote>
<p>要通过<code>example.com</code>和<code>www.example.com</code>使用内置的“独立”网络服务器（您可能需要暂时停止现有的网络服务器，如果有）获取证书：</p>
<pre><code>$ certbot certonly --standalone -d example.com -d www.example.com
</code></pre><h2 id="自动续期"><a href="#自动续期" class="headerlink" title="自动续期"></a>自动续期</h2><p>Certbot可以配置为在证书过期之前自动更新证书。 由于Let’s Encrypt的加密证书只能持续90天，因此推荐最好使用此功能。通过运行以下命令来测试证书的自动更新：</p>
<pre><code>certbot renew --dry-run
</code></pre><p>如果看起来工作正常，可以通过添加cron或systemd作业来安排自动更新，该作业运行以下命令：</p>
<pre><code>certbot renew --quiet
</code></pre><p>有关续订的更多详细信息和选项，请参阅<a href="https://certbot.eff.org/docs/using.html#renewal" target="_blank" rel="external">https://certbot.eff.org/docs/using.html#renewal</a></p>
<blockquote>
<p>注意：<br>如果您要设置cron或systemd作业，我们建议您每天运行两次（除非您的证书需要续订或撤销，否则它不会执行任何操作，但定期运行会允许网站有机会由于某种原因发生的撤销证书中恢复）。请在一小时内选择随机分钟进行续订任务。</p>
</blockquote>
<p>Reference</p>
<blockquote>
<p><a href="https://certbot.eff.org/#centosrhel7-nginx" target="_blank" rel="external">https://certbot.eff.org/#centosrhel7-nginx</a></p>
</blockquote>
<p>本文地址: <a href="http://colascarlet.moe/HTTPS/Centos/Nginx/234/">http://colascarlet.moe/HTTPS/Centos/Nginx/234/</a> 转载请注明</p>

  </section>

  
  
</article>


            <footer class="footer">

    <span class="footer__copyright">&copy; 2014-2015. | 由<a href="https://hexo.io/">Hexo</a>强力驱动 | 主题<a href="https://github.com/someus/huno">Huno</a></span>
    
</footer>
        </div>
    </div>

    <!-- js files -->
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/main.js"></script>
    <script type="text/javascript" src="/js/scale.fix.js"></script>
    <script type="text/javascript" src="/js/animsition.min.js"></script>
    <script type="text/javascript" src="/js/prettify/prettify.js"></script>
    

    

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> 
        $(document).ready(function(){
            MathJax.Hub.Config({ 
                tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
            });
        });
    </script>


    

    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                displayNow: false,
                autoDetectHeadings: true,
                contentId: "post-content",
            });
        });
    </script>


    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-91753519-1', 'auto');
  ga('send', 'pageview');

</script>
    
    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

</body>
</html>
